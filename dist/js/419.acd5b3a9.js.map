{"version":3,"file":"js/419.acd5b3a9.js","mappings":"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","sources":["webpack://vue-demo/./src/views/ProductsList.vue","webpack://vue-demo/./src/views/ProductsList.vue?b55d"],"sourcesContent":["<template>\n  <Loading :active=\"isLoading\"></Loading>\n  <div class=\"container-fluid d-flex mx-auto\">\n    <div class=\"card-area d-flex flex-wrap mx-auto row\">\n      <div class=\"card mt-4 col-3\" v-for=\"item in products\" :key=\"item.id\">\n        <img\n          :src=\"item.imageUrl\"\n          class=\"card-img-top\"\n          alt=\"\"\n          style=\"\n            height: 300px;\n            width: 450px;\n            object-fit: cover;\n            object-position: 50% 30%;\n          \"\n        />\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">{{ item.title }}</h5>\n          <h5 class=\"card-title\">{{ item.origin_price }} 元</h5>\n          <div class=\"btn-group btn-group-sm\">\n            <button\n              type=\"button\"\n              class=\"btn btn-outline-secondary\"\n              @click=\"getProduct(item.id)\"\n            >\n              查看更多\n            </button>\n            <button\n              type=\"button\"\n              class=\"btn btn-outline-danger\"\n              @click=\"addCart(item.id)\"\n              :disabled=\"this.status.loadingItem === item.id\"\n            >\n              <div\n                class=\"spinner-grow spinner-grow-sm\"\n                role=\"status\"\n                v-if=\"this.status.loadingItem === item.id\"\n              >\n                <span class=\"visually-hidden\">Loading...</span>\n              </div>\n              加到購物車\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      products: [],\n      product: {},\n      //   單一按鈕狀態\n      status: {\n        loadingItem: \"\",\n      },\n      form: {\n        user: {\n          name: \"\",\n          email: \"\",\n          tel: \"\",\n          address: \"\",\n        },\n        message: \"\",\n      },\n      cart: {},\n      coupon_code: \"\",\n      isLoading: false,\n    };\n  },\n  methods: {\n    getProducts() {\n      // 取得商品列表\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      //loading改變\n      this.isLoading = true;\n      this.$http.get(url).then((res) => {\n        this.products = res.data.products;\n        this.isLoading = false;\n      });\n    },\n    //進入單一商品頁面\n    getProduct(id) {\n      //直接到路由表的id\n      this.$router.push(`/user/product/${id}`);\n    },\n    addCart(id) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.isLoading = true;\n      //   去比對是點到哪個產品\n      this.status.loadingItem = id;\n      const cart = { product_id: id, qty: 1 };\n      this.$http.post(url, { data: cart }).then(() => {\n        this.status.loadingItem = \"\";\n        this.isLoading = false;\n      });\n    },\n    getCart() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.isLoading = true;\n      this.$http.get(url).then((res) => {\n        // 包含陣列列表\n        this.cart = res.data.data;\n        this.isLoading = false;\n      });\n    },\n    updateCart(item) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      this.isLoading = true;\n      this.status.loadingItem = item.id;\n      const cart = { product_id: item.product_id, qty: item.qty };\n      this.$http.put(url, { data: cart }).then(() => {\n        this.status.loadingItem = \"\";\n        this.getCart();\n      });\n    },\n    addCouponCode() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\n      this.isLoading = true;\n      const coupon = { code: this.coupon_code };\n      this.$http.post(url, { data: coupon }).then(() => {\n        this.getCart();\n        this.isLoading = false;\n      });\n    },\n    createOrder() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order`;\n      const order = this.form;\n      this.isLoading = true;\n      this.$http.post(url, { data: order }).then(() => {\n        this.isLoading = false;\n      });\n    },\n  },\n  created() {\n    this.getProducts();\n    this.getCart();\n  },\n};\n</script>\n","import { render } from \"./ProductsList.vue?vue&type=template&id=6bd6912d\"\nimport script from \"./ProductsList.vue?vue&type=script&lang=js\"\nexport * from \"./ProductsList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\vue-demo\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","role","_createElementVNode","_hoisted_11","_createVNode","_component_Loading","active","$data","_hoisted_1","_hoisted_2","_createElementBlock","_Fragment","item","key","id","src","imageUrl","alt","style","_hoisted_4","_hoisted_5","title","_hoisted_6","origin_price","_hoisted_7","type","onClick","$options","disabled","status","loadingItem","_hoisted_10","data","products","product","form","user","name","email","tel","address","message","cart","coupon_code","isLoading","methods","getProducts","url","this","$http","get","then","res","getProduct","$router","push","addCart","product_id","qty","post","getCart","updateCart","put","addCouponCode","coupon","code","createOrder","order","created","__exports__","render"],"sourceRoot":""}